{% extends "student/index2.html" %}
{% load static %}


{% block content %}

<script src="{% static 'student/js/timeme.min.js' %}"></script>
    

<div class="row justify-content-center">
    {% if k != 0 and k != -1 %}
    {% if m %}
    {% if k == 11 %}
    <div class="col-md-10">
        <div class="card card-outline-danger">
            <div class="card-header">
                <h3 class="m-b-0 text-white">Please select the options provided.</h3></div>
        </div>
    </div>
    {% endif %}
    {% if k == 1 %}
    <div class="col-md-10">
        <div class="card card-outline-danger">
            <div class="card-header">
                <h4 class="m-b-0 text-white">OOPS! Wrong answer.</h4></div>
            <div class="card-body">
                    <h3 class="card-title">Please check the hint provided below question.</h3>
                <p class="card-text">It will be helpful.</p>
            </div>
        </div>
    </div>
    {% endif %}
    {% if k == 2 %}
    <div class="col-md-10">
        <div class="card card-outline-danger">
            <div class="card-header">
                <h4 class="m-b-0 text-white">OOPS! Wrong answer.</h4></div>
            <div class="card-body">
                    <h3 class="card-title">Please check the hint, it's your last attempt.</h3>
                <p class="card-text">hints are always useful.</p>
            </div>
        </div>
    </div>
    {% endif %}
    {% if k == 3 %}
    <div class="col-md-10">
        <div class="card card-outline-danger">
            <div class="card-header">
                <h4 class="m-b-0 text-white">OOPS! Wrong answer.</h4></div>
            <div class="card-body">
                    <h3 class="card-title">Lets give it last and final attempt by understanding the basics.</h3>
                <p class="card-text">The below link will help you understand the topic.</p>
                <a href="#" class="btn btn-inverse">Learn Site</a>
            </div>
        </div>
    </div>
    {% endif %}
    {% if k == 4 %}
    <div class="col-md-10">
            <div class="card card-outline-danger">
                <div class="card-header">
                    <h4 class="m-b-0 text-white">OOPS! Wrong answer.</h4></div>
                <div class="card-body">
                        <h3 class="card-title">It seems we need to get through the topic again and get the basics clear.</h3>
                    <p class="card-text">Here are the solution and learning resource.</p>
                    <p class="card-text">Solution - {{so}}</p>
                    <a href="#" class="btn btn-inverse">Learn Site</a>
                </div>
            </div>
        </div>
    {% endif %}
    {% if k == 5 %}
    <div class="col-md-10">
            <div class="card card-outline-danger">
                <div class="card-header">
                    <h4 class="m-b-0 text-white">OOPS! Wrong answer.</h4></div>
                <div class="card-body">
                        <h3 class="card-title">We appreciate your efforts, check the solution given below. It will help you know where you went wrong.</h3>
                    <p class="card-text">Solution - <pre>{{so}}</pre></p>
                    
                </div>
            </div>
        </div>
    {% endif %}
    {% if k == 6 %}
    <div class="col-md-10">
            <div class="card card-outline-danger">
                <div class="card-header">
                    <h4 class="m-b-0 text-white">OOPS! Wrong answer.</h4></div>
                <div class="card-body">
                        <h3 class="card-title">You havn't checked the hint. This is uncool. We have provide learning resource and solution below for your better understanding. Please go through it.</h3>
                    <p class="card-text">Solution - {{so}}</p>
                    <a href="#" class="btn btn-inverse">Learn Site</a>
                </div>
            </div>
        </div>
    {% endif %}
    {% if k == 7 %}
    <div class="col-md-10">
            <div class="card card-outline-danger">
                <div class="card-header">
                    <h4 class="m-b-0 text-white">OOPS! Wrong answer.</h4></div>
                <div class="card-body">
                        <h3 class="card-title">Maybe you missed something. Give it one more try.</h3>
                    
                </div>
            </div>
        </div>
    {% endif %}
    {% endif %}
    <div class="col-md-10">
            <div class="time-message">
                    <h1>
                        <span id="timeInSeconds">0</span> <span>Minutes</span>
                    </h1>
            </div>
            {% for que,hint,op1,op2,op3,op4,qid,aid,qno in z %}
        <div class="card card-outline-info ">
            <div class="card-header">
                <h1 class="m-b-0 text-white">Q{{qno}}.</h1></div>
            <div class="card-body">
                <h2 class="card-title">{{que}}</h2>
                
                <!-- <p class="card-text">With supporting text below as a natural lead-in to additional content.</p> -->
                <form class="form" id="ttt" method="post" action="{% url 'test' aid qid %}">
                        {% csrf_token %}
                        {% if x == 0 %}
                    <div class="row">
                    <div class="input-group mx-0 mx-md-3">
                            <div class="input-group-prepend">
                        <div><input name="opt" type="radio" id="radio_30{{qid}}" class="with-gap radio-col-deep-purple" value="1"/>
                        <label for="radio_30{{qid}}">{{op1}}</label></div>
                        </div></div></div>
                        <div class="row">
                    <div class="input-group mx-0 mx-md-3">
                            <div class="input-group-prepend">
                        <div><input name="opt" type="radio" id="radio_31{{qid}}" class="with-gap radio-col-deep-purple" value="2"/>
                        <label for="radio_31{{qid}}">{{op2}}</label></div>
                        </div></div></div>
                        <div class="row">
                    <div class="input-group mx-0 mx-md-3">
                            <div class="input-group-prepend">
                        <div><input name="opt" type="radio" id="radio_32{{qid}}" class="with-gap radio-col-deep-purple" value="3" />
                        <label for="radio_32{{qid}}">{{op3}}</label></div>
                        </div></div></div>
                        <div class="row">
                    <div class="input-group mx-0 mx-md-3">
                            <div class="input-group-prepend">
                        <div><input name="opt" type="radio" id="radio_33{{qid}}" class="with-gap radio-col-deep-purple" value="4" />
                        <label for="radio_33{{qid}}">{{op4}}</label></div>
                        </div></div></div>
                        <input type="hidden" id="hint" name="hint" value="0">
                        <input type="hidden" id="time" name="time" value="0">
                        {% endif %}
                        <input type="hidden" id="x" name="x" value="{{x}}">
                        <div class="row justify-content-center m-r-5"><div class="col-2"><button class="btn btn-red btn-block" type="submit">Next</button></div>
                        
                        </div>
                        </form>
            </div>
            <div class="card-footer text-center">
                    <a data-toggle="collapse" href="#que{{qid}}" aria-expanded="true" aria-controls="collapse-example" id="heading-example" class="d-block ll">
                            <i class="fa fa-chevron-down pull-right"></i>
                            Hint!
                    </a>
                    <div id="que{{qid}}" class="collapse" aria-labelledby="heading-example">

                                {{hint}}
                        </div>
            </div>

        </div>
        {% endfor %}
    </div>
    {% elif k == 0 %}
    <div class="col-md-10">
        <div class="card card-outline-info">
            <div class="card-header">
                <h1 class="m-b-0 text-white">Congratulations!!</h1></div>
            <div class="card-body">
                    <h3 class="card-title">It's always good to complete the learning.
                    Now you can attend the Confidence test.
                    All the best! And enjoy the learning.</h3>
                
                <p class="card-text">You can download the questions and their solution from the above link and know how topper is performing.</p>
                <div class="card-text text-center mr-3">
                <a href="{% url 'analyse' sid %}" class="btn btn-info">Go to the dashboard to check the result.</a>
            </div>
            </div>
        </div>
    </div>
    {% elif k == -1 %}
    <div class="col-md-10">
        <div class="card card-outline-info">
            <div class="card-header">
                <h1 class="m-b-0 text-white">Already completed.</h1></div>
            <div class="card-body">
                    <h3 class="card-title">It's always good to complete the learning.
                    Now you can attend the Confidence test.
                    All the best! And enjoy the learning.</h3>
                
                <p class="card-text">You can download the questions and their solution from the above link and know how topper is performing.</p>
                <div class="card-text text-center mr-3">
                <a href="{% url 'analyse' sid %}" class="btn btn-info">Go to the dashboard to check the result.</a>
            </div>
            </div>
        </div>
    </div>
    {% endif %}
    
</div>
<div class="row justify-content-center">
<div class="col-md-10">
    <div class="card card-outline-inverse">
        <div class="card-header">
            <h4 class="m-b-0 text-white">Calculations:</h4></div>
        <div class="card-body">
            <input type="text" id="i1"><br ><br >
        <div id="d2">
            <input type="text" id="i2"  hide><br ><br >
        </div>
        <div id="d3">
            <input type="text" id="i3"  hide><br ><br >
        </div>
        <div id="d4">
            <input type="text" id="i4"  hide><br ><br >
        </div>
        <div id="d5">
            <input type="text" id="i5"  hide><br ><br >
        </div>
        <div id="d6">
            <input type="text" id="i6"  hide><br ><br >
        </div>
        <div id="d7">
            <input type="text" id="i7"  hide><br ><br >
        </div>
        <div id="d8">
            <input type="text" id="i8"  hide><br ><br >
        </div>
        <div id="d9">
            <input type="text" id="i9"  hide><br ><br >
        </div>
        <div id="d10">
            <input type="text" id="i10"  hide><br ><br >
        </div>
        <div id="d11">
            <input type="text" id="i11"  hide><br ><br >
        </div>
        <div id="d12">
            <input type="text" id="i12"  hide><br ><br >
        </div>
        <div id="d13">
            <input type="text" id="i13"  hide><br ><br >
        </div>
        <div id="d14">
            <input type="text" id="i14"  hide><br ><br >
        </div>
        <div id="d15">
            <input type="text" id="i15"  hidden><br ><br >
        </div>
        <div id="d16">
            <p>Variable after equation not defined.</p>
        </div>
        <div id="d17">
            <p>Variable used before equation not defined.</p>
        </div>
            <!-- <div id="div">
            </div> -->
                <button onclick ="appendRow()" value="Add Row">Add Row</button>
            
        </div>
    </div>
</div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<script>
    var x=1;
// function appendRow()
// {
//     astat = document.getElementById(x.toString()).value;
//     console.log(astat);
//     asta = document.getElementById(x.toString()).value;
//     if(asta != ""){
//     var divvv = document.getElementById('div');
//     divvv.innerHTML += "<input type='text' id='"+ ++x +"'><br ><br >";
//     console.log(x);
//     }
// }
for(kk = 2;kk<18;kk++){
    console.log(kk);
    $("#d"+ kk.toString()).hide();
    console.log(kk);
}
var variab = {};
var oper = ["+","-","*","/"];
var opera;
var name; 
var zalil = 0;
var restt;
var errorr = 0;
var error2 = 1;
var velll = 0;
var velll1 = 0;
var velll2 = 0;
var variable1 = "";
var variable2 = "";
function appendRow()
{
    error2 = 1;
    errorr = 0;
    zalil = 0;
    velll = 0;
    velll1 = 0;
    velll2 = 0;
    
    console.log(x);
    // if(x == 2){
    //     var astat = document.getElementById("02").value;
    //     console.log(astat);
    // }
    
    var astat = document.getElementById("i" + x.toString()).value;
    console.log(astat);
    
    
    // var res23 = astat.charAt(1);
    // console.log(res23);
    
    if(astat.indexOf(":") != -1){
        console.log("Worked");
        console.log(astat.indexOf(":"));
        var varll = astat.indexOf(":");
        name = astat.slice(0, varll);
        console.log(name);
        variab[name] = "none";
        error2 = 0;
        // console.log("gname is here",gname);
        // alert(variab[name]);
    }
    else if(astat.indexOf("=") != -1){
        var varlle = astat.indexOf("=");
        for(i=0;i<oper.length;i++){
            if(astat.indexOf(oper[i]) != -1){
                zalil = 1;
                opera = oper[i];
            }
        }
        console.log(zalil,opera);
        if(zalil == 0){
        console.log("name here:",astat.slice(0,varlle));
        // console.log(astat.slice(varlle+1));
        // console.log((varlle+1));

        for (var key in variab) {
            if (variab.hasOwnProperty(key)) {
                console.log(key,variab[astat.slice(0,varlle)],astat.slice(0,varlle));
                if(key == astat.slice(0,varlle) ){
                    error2 = 0;
                    console.log("error2");
                }
            }
        }
        if(error2 == 1){
            console.log("Errorrr2");
            $("#d17").show();
        }
        else{
            error2 = 1;
            console.log(astat.slice(varlle+1));
        if(isNaN(astat.slice(varlle+1))){
            for (var key in variab) {
            if (variab.hasOwnProperty(key)) {
                if(key == astat.slice(varlle+1) ){
                    error2 = 0;
                    console.log("error2");
                }
            }
        }
        }
        else{
            error2 = 0;
        }
        if(error2 == 1){
            console.log("Errorrr2","hereee");
            $("#d16").show();
        }
        else{
            if(isNaN(astat.slice(varlle+1))){
                variab[astat.slice(0,varlle)] = variab[astat.slice(varlle+1)];
            }
            else{
        variab[astat.slice(0,varlle)] = parseInt(astat.slice((varlle+1)));
        console.log("value below");
        console.log(typeof variab[astat.slice(0,varlle)]);
        // error2 = 0;
            }
        }
        }
        }
        else{
            console.log("inside elsee",opera);
            restt = astat.slice(varlle+1);
            console.log(restt);
            variables = restt.split(opera);
            console.log("after split",variables);
            for (var key in variab) {
            if (variab.hasOwnProperty(key)) {
                console.log(key,variab[astat.slice(0,varlle)],astat.slice(0,varlle));
                if(key == astat.slice(0,varlle)){
                    error2 = 0;
                    console.log("error2");
                }
                for(i=0;i<variables.length;i++){
                    if(key == variables[i] && i == 0){
                        variable1 = key;
                        velll1 = 1;
                        velll = -1;
                    }
                    else if(key == variables[i] && i == 1){
                        variable2 = key;
                        velll2 = 2;
                        velll = -1;
                    }
                }
            }
        }
        console.log("velll here!!!",velll);
        if(velll == 0){
            if(error2 == 1){
                console.log("Errorrr2");
                $("#d17").show();
            }
            else{
                for(i=0;i<variables.length;i++){
                console.log(Number(variables[i]));
                // var etetete = Number("sfsdssf");
                if(isNaN(variables[i])){
                    console.log("Error here!!!!!");
                    errorr = 1;
                    $("#d16").show();
                }
                }
                // else{
                //     console.log("djhjfjhjd");
                // }
            if(errorr != 1){
                if(opera == "+"){
                variab[astat.slice(0,varlle)] = Number(variables[0]) + Number(variables[1]);
                }
                else if(opera == "-"){
                    variab[astat.slice(0,varlle)] = Number(variables[0]) - Number(variables[1]);
                }
                else if(opera == "*"){
                    variab[astat.slice(0,varlle)] = Number(variables[0]) * Number(variables[1]);
                }
                else if(opera == "/"){
                    variab[astat.slice(0,varlle)] = Number(Number(variables[0]) / Number(variables[1]));
                }
            }
            }
        }
        else if(velll1 == 1 && velll2 != 2){
            if(error2 == 1){
                console.log("Errorrr2");
                $("#d17").show();
            }
            else{
                // for(i=0;i<variables.length;i++){
                // console.log(Number(variables[i]));
                // var etetete = Number("sfsdssf");
                if(isNaN(variables[1])){
                    console.log("Error here!!!!!");
                    errorr = 1;
                    $("#d16").show();
                }
                // }
                // else{
                //     console.log("djhjfjhjd");
                // }
            if(errorr != 1){
                if(opera == "+"){
                variab[astat.slice(0,varlle)] = variab[variable1] + Number(variables[1]);
                }
                else if(opera == "-"){
                    variab[astat.slice(0,varlle)] = variab[variable1] - Number(variables[1]);
                }
                else if(opera == "*"){
                    variab[astat.slice(0,varlle)] = variab[variable1] * Number(variables[1]);
                }
                else if(opera == "/"){
                    variab[astat.slice(0,varlle)] = Number(variab[variable1] / Number(variables[1]));
                }
            }
            }
        }
        else if(velll1 != 1 && velll2 == 2){
            if(error2 == 1){
                console.log("Errorrr2");
                $("#d17").show();
            }
            else{
                // for(i=0;i<variables.length;i++){
                // console.log(Number(variables[i]));
                // var etetete = Number("sfsdssf");
                if(isNaN(variables[0])){
                    console.log("Error here!!!!!");
                    errorr = 1;
                    $("#d16").show();
                }
                // }
                // else{
                //     console.log("djhjfjhjd");
                // }
            if(errorr != 1){
                if(opera == "+"){
                variab[astat.slice(0,varlle)] = Number(variables[0]) + variab[variable2];
                }
                else if(opera == "-"){
                    variab[astat.slice(0,varlle)] = Number(variables[0]) - variab[variable2];
                }
                else if(opera == "*"){
                    variab[astat.slice(0,varlle)] = Number(variables[0]) * variab[variable2];
                }
                else if(opera == "/"){
                    variab[astat.slice(0,varlle)] = Number(Number(variables[0]) / variab[variable2]);
                }
            }
            }
        }
        else if(velll1 == 1 && velll2 == 2){
            if(error2 == 1){
                console.log("Errorrr2");
                $("#d17").show();
            }
            else{
                // for(i=0;i<variables.length;i++){
                // console.log(Number(variables[i]));
                // var etetete = Number("sfsdssf");
                // if(isNaN(variables[1])){
                //     console.log("Error here!!!!!");
                //     errorr = 1;
                //     $("#d16").show();
                // }
                // }
                // else{
                //     console.log("djhjfjhjd");
                // }
            if(errorr != 1){
                if(opera == "+"){
                variab[astat.slice(0,varlle)] = variab[variable1] + variab[variable2];
                }
                else if(opera == "-"){
                    variab[astat.slice(0,varlle)] = variab[variable1] - variab[variable2];
                }
                else if(opera == "*"){
                    variab[astat.slice(0,varlle)] = variab[variable1] * variab[variable2];
                }
                else if(opera == "/"){
                    variab[astat.slice(0,varlle)] = Number(variab[variable1] / variab[variable2]);
                }
            }
            }
        }
        }
    }
    if(errorr == 0 && error2 == 0){
        $("#d16").hide();
        $("#d17").hide();
    var asta = document.getElementById("i" + x.toString()).value;
    if(asta != ""){
        x = x + 1;
    $("#d"+ x.toString()).show();
    console.log(x);
    console.log("obj here",variab);
    for (var key in variab) {
            if (variab.hasOwnProperty(key)) {
                console.log(key + " -> " + variab[key]);
            }
        }
    }
    }
}
    // Initialize library and start tracking time
    TimeMe.initialize({
    	currentPageName: "my-home-page", // current page
    	idleTimeoutInSeconds: 30 // seconds
	    });

	    // ... Some time later ...

	    // Retrieve time spent on current page
        var timeSpentOnPage1 = TimeMe.getTimeOnCurrentPageInSeconds();
        window.onload = function(){
				setInterval(function(){
                    var timeSpentOnPage = TimeMe.getTimeOnCurrentPageInSeconds();
                    var sec = timeSpentOnPage.toFixed(0);
                    Number(sec);
                    var min = sec/60;
                    var minu = parseInt(min);
                    let minu2 = minu.toString().padStart(2, "0");
                    var minu1 = sec % 60;
                    let minu3 = minu1.toString().padStart(2, "0");
                    var minute = String(minu2) + " : " + String(minu3);
                    document.getElementById('timeInSeconds').textContent = minute;
                    $("#ttt").on("submit", function (e) {
        // alert(minute);
        document.getElementById("time").value = sec;//change input
    });
                }, 25);
        
            }
    
$(document).ready(function(){
  $("#heading-example").click(function(){
    $('input[name=hint]').val('1');
    alert(minute);

  });
});


</script>


{% endblock %}



{% block carousel %}
<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner" role="listbox">
        <div class="carousel-item active">
            <div class="container"> <img class="d-block img-fluid" src="{% static 'student/assets/images/big/img1.jpg' %}" alt="First slide"></div>
        </div>
        <div class="carousel-item">
            <div class="container"><img class="d-block img-fluid" src="{% static 'student/assets/images/big/img2.jpg' %}" alt="Second slide"></div>
        </div>
        <div class="carousel-item">
            <div class="container"><img class="d-block img-fluid" src="{% static 'student/assets/images/big/img3.jpg' %}" alt="Third slide"></div>
        </div>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev"> <span class="carousel-control-prev-icon" aria-hidden="true"></span> <span class="sr-only">Previous</span> </a>
    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next"> <span class="carousel-control-next-icon" aria-hidden="true"></span> <span class="sr-only">Next</span> </a>
</div>
{% endblock %}



{% block tricks %}
<div id="accordion" class="nav-accordion" role="tablist" aria-multiselectable="true">
    <div class="card">
        <div class="card-header" role="tab" id="headingOne">
            <h5 class="mb-0">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
          Collapsible Group Item #1
        </a>
      </h5> </div>
        <div id="collapseOne" class="collapse show" role="tabpanel" aria-labelledby="headingOne">
            <div class="card-body"> Anim pariatur cliche reprehenderit, enim eiusmod high. </div>
        </div>
    </div>
    <div class="card">
        <div class="card-header" role="tab" id="headingTwo">
            <h5 class="mb-0">
        <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
          Collapsible Group Item #2
        </a>
      </h5> </div>
        <div id="collapseTwo" class="collapse" role="tabpanel" aria-labelledby="headingTwo">
            <div class="card-body"> Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. </div>
        </div>
    </div>
    <div class="card">
        <div class="card-header" role="tab" id="headingThree">
            <h5 class="mb-0">
        <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
          Collapsible Group Item #3
        </a>
      </h5> </div>
        <div id="collapseThree" class="collapse" role="tabpanel" aria-labelledby="headingThree">
            <div class="card-body"> Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. </div>
        </div>
    </div>
</div>
{% endblock %}



{% block change %}
<form>
    <div class="form-group">
        <input type="text" class="form-control" id="exampleInputname1" placeholder="Enter Name"> </div>
    <div class="form-group">
        <input type="email" class="form-control" placeholder="Enter email"> </div>
    <div class="form-group">
        <textarea class="form-control" id="exampleTextarea" rows="3" placeholder="Message"></textarea>
    </div>
    <button type="submit" class="btn btn-info">Submit</button>
</form>
{% endblock %}



{% block links %}
<ul class="list-style-none">
    <li><a href="javascript:void(0)"><i class="fa fa-check text-success"></i> You can give link</a></li>
    <li><a href="javascript:void(0)"><i class="fa fa-check text-success"></i> Give link</a></li>
    <li><a href="javascript:void(0)"><i class="fa fa-check text-success"></i> Another Give link</a></li>
    <li><a href="javascript:void(0)"><i class="fa fa-check text-success"></i> Forth link</a></li>
    <li><a href="javascript:void(0)"><i class="fa fa-check text-success"></i> Another fifth link</a></li>
</ul>
{% endblock %}